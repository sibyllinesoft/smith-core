# OPA management server configuration for the Smith observability stack.
# The server exposes the policy and data APIs on port 8181.
# Envoy ext_authz is handled via the REST API (gateway.rego policy).
labels:
  app: smith-observability
  component: opa-management

# Persist data and uploaded policies on disk so they survive container restarts.
storage:
  directory:
    path: /var/opa/data

plugins:
  envoy_ext_authz_grpc:
    addr: ":9292"
    path: smith/envoy/authz/allow

decision_logs:
  console: true
