# Smith Core environment template
# Copy to `.env` and customize values for your environment.

# ── Docker Compose credentials ───────────────────────────────────────────
# Development defaults below are intentionally weak; change them before any
# deployment outside a trusted single-user private network.
POSTGRES_PASSWORD=smith-dev
CLICKHOUSE_PASSWORD=observability-dev
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin

# Optional local volume overrides
SMITH_NATS_DATA_DIR=./data/nats
SMITH_POSTGRES_DATA_DIR=./data/postgres
SMITH_REDIS_DATA_DIR=./data/redis
SMITH_CLICKHOUSE_DATA_DIR=./data/clickhouse
SMITH_GRAFANA_DATA_DIR=./data/grafana

# ── External repos ──────────────────────────────────────────────────────
# Path to the agentd repository checkout (required for build/run commands)
AGENTD_ROOT=

# ── Core endpoints ───────────────────────────────────────────────────────
SMITH_NATS_URL=nats://127.0.0.1:4222
NATS_URL=nats://127.0.0.1:4222
SMITH_DATABASE_URL=postgresql://smith:smith-dev@localhost:5432/smith
PI_BRIDGE_PG=postgresql://smith:smith-dev@localhost:5432/smith
PI_BRIDGE_PG_APP=postgresql://smith_app:smith-app-dev@localhost:5432/smith
MCP_INDEX_URL=http://localhost:9200
AGENTD_URL=https://localhost:6173
MCP_INDEX_API_TOKEN=change-me-mcp-index-token
MCP_INDEX_ALLOW_UNAUTHENTICATED=false
MCP_SIDECAR_API_TOKEN=change-me-mcp-sidecar-token
MCP_SIDECAR_ALLOW_UNAUTHENTICATED=false
# Must be 64 hex chars; all-zero digest is rejected unless explicitly overridden.
AGENTD_CAPABILITY_DIGEST=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef
AGENTD_CONFIG=${AGENTD_ROOT}/config/agentd.toml

# Sandbox defaults (pi-bridge -> agentd)
AGENTD_WORKDIR=
AGENTD_PATHS_RW=
AGENTD_PATHS_RO=/etc,/usr

# Optional persistent VM pool overrides (executor VM sessions)
# SMITH_EXECUTOR_VM_POOL_ENABLED=true  # required to enable persistent VM sessions
# SMITH_EXECUTOR_VM_METHOD=gondolin   # defaults to gondolin on macOS, host on other OSes
# SMITH_EXECUTOR_GONDOLIN_COMMAND=gondolin
# SMITH_EXECUTOR_GONDOLIN_ARGS=exec,--   # comma-separated

# Chat bridge hardening (single-user baseline)
CHAT_BRIDGE_CONFIG=config/chat-bridge.toml
CHAT_BRIDGE_ADMIN_TOKEN=
CHAT_BRIDGE_DM_POLICY=pairing
CHAT_BRIDGE_WEBHOOK_PORT=8092
CHAT_BRIDGE_REQUIRE_SIGNED_WEBHOOKS=true
CHAT_BRIDGE_TELEGRAM_WEBHOOK_SECRET=
CHAT_BRIDGE_DISCORD_PUBLIC_KEY=
CHAT_BRIDGE_WHATSAPP_VERIFY_TOKEN=
CHAT_BRIDGE_WHATSAPP_APP_SECRET=
CHAT_BRIDGE_GITHUB_INGEST_SUBJECT=smith.orch.ingest.github
CHAT_BRIDGE_GITHUB_WEBHOOK_SECRET=

# Optional private-network indicators (installer warns if neither is configured)
# Cloudflare named tunnel (compose profile: tunnel-cloudflare)
# CLOUDFLARE_TUNNEL_TOKEN=
# CLOUDFLARE_TUNNEL_HOSTNAME=
# CLOUDFLARE_TUNNEL_E2E_URL=https://agent.example.com/health
#
# Tailscale (host-managed client)
# TAILSCALE_AUTHKEY=
# TAILSCALE_HOSTNAME=smith-core
# TAILSCALE_TUNNEL_E2E_URL=https://smith-core.your-tailnet.ts.net/health

# Agent identity/model
AGENT_ID=smith-default
PI_PROVIDER=anthropic
PI_MODEL=claude-sonnet-4-5-20250929

# ── Optional chat gateway secrets ────────────────────────────────────────
DISCORD_BOT_TOKEN=
TELEGRAM_BOT_TOKEN=
SLACK_BOT_TOKEN=
SLACK_APP_TOKEN=
MATTERMOST_TOKEN=
MATRIX_HOMESERVER=
MATRIX_ACCESS_TOKEN=
SIGNAL_RECIPIENT=
TEAMS_TENANT_ID=
TEAMS_CLIENT_ID=
TEAMS_CLIENT_SECRET=
WHATSAPP_ACCESS_TOKEN=
GOOGLE_CHAT_WEBHOOK_URL=

# Do not commit real tokens or keys.
